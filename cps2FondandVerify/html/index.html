<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cps2FondandVerify: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="github-seeklogo.com.svg"/></td>
  <td id="projectalign">
   <div id="projectname">cps2FondandVerify<span id="projectnumber">&#160;2.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Main Page </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md0">System function introduction</a></li>
<li class="level1"><a href="#autotoc_md1">The Main Process and usage</a></li>
<li class="level1"><a href="#autotoc_md2">get the policy</a><ul><li class="level2"><a href="#autotoc_md3">by PRP</a></li>
<li class="level2"><a href="#autotoc_md4">by FOND-ASP</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="mainpage"></a></p>
<p >Installation dependencies:</p>
<div class="fragment"><div class="line">pip install z3 z3-solver==4.8.10.0 networkx func_timeout matplotlib </div>
</div><!-- fragment --><p >Based on python3.8, this tool automatically verifies whether high-level modeling is a "sound abstraction" corresponding to low-level models. Some windows users may need the following installation scripts if they are not using miniconda:</p>
<div class="fragment"><div class="line">python -m pip install z3 z3-solver==4.8.10.0 networkx func_timeout matplotlib </div>
</div><!-- fragment --><p >Parameters:</p>
<div class="fragment"><div class="line">&gt;python main.py --help</div>
<div class="line">usage: main.py [-h] [-domainname DOMAINNAME] [-cpn CPN] [-deletehistory DELETEHISTORY] [-debug DEBUG]</div>
<div class="line">               [-planner PLANNER]</div>
<div class="line"> </div>
<div class="line">code autoGenerator</div>
<div class="line"> </div>
<div class="line">optional arguments:</div>
<div class="line">  -h, --help            show this help message and exit</div>
<div class="line">  -domainname DOMAINNAME</div>
<div class="line">                        Path to fond domain files(default=dfs). -- OPTIONAL</div>
<div class="line">  -cpn CPN              number of classical plans,like &#39;3&#39; for &#39;*p1,*p2,*p3&#39;. -- NOT OPTIONAL</div>
<div class="line">  -deletehistory DELETEHISTORY</div>
<div class="line">                        delete history output files or not. -- OPTIONAL</div>
<div class="line">  -debug DEBUG          print DEBUG message or not. -- OPTIONAL FOR TEST</div>
<div class="line">  -planner PLANNER      PRP(fairness) or FONDASP(conditional fairness). -- OPTIONAL FOR TEST</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md0"></a>
System function introduction</h1>
<p >The main algorithm of the FOND$^{+}$ generation and verification, including two fucntions Function $cps2fond$ and $verify$.</p>
<p >Function $cps2fond$ for FOND$^+$ abstraction generation consists of four steps as follows:</p>
<ul>
<li>For each instance $p_i \in \mathcal{P}$, traverse every reachable concrete states and its state transitions from $p_i$, and get the sampled abstract state transitions graph $\mathcal{E}(p_i)$ with the given $m$;</li>
<li>Merge all $\mathcal{E}(p_i)$ for the state transitions graph $\mathcal{E}_{fond}$;</li>
<li>Get the FOND$^+$ planning problem from $\mathcal{E}_{fond}$;</li>
</ul>
<p >If all passed it returns the FOND$^+$ problem $\mathcal{G}_h$,else it returns $No$ which means the refinement mapping $m$ given is is not fine-grained enough.</p><ul>
<li>Function $verify$ will firstly check whether each action $a \in A$ satisfies the formula $m(s_h) \supset \exists \vec{x}.Poss(a_k(\vec{x}))$, where $Poss(a_k(\vec{x}))$ means a formula describing the precondition of low-level action $a_k$. <br  />
</li>
<li>Function $verify$ also check whether the conjunctive normal form of all initial states(goals) from any classical planning instance of $\mathcal{P}$ and the first order formula $\phi_{I}$ describing the initial state(goal) of the original generalized planning is equivalent, respectively. Let $\phi_{I}$($\phi_{G}$) denotes the first order formula describing the initial state $S_0$(goal $G$) in the original generalized planning problem, there is $m$ instances in $\mathcal{S}$, then we need to verify the $m(hs_I^1,...,hs_I^m) \supset \phi_{I}$ and $m(hs_G^1,...,hs_G^m) \supset \phi_{G}$.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
The Main Process and usage</h1>
<div class="fragment"><div class="line">python main.py -domainname blocks_clear -cpn 1 -deletehistory False -debug True</div>
<div class="line">python main.py -domainname llvisitall -cpn 3 -deletehistory False -debug True</div>
<div class="line">python main.py -domainname reversell -cpn 1 -deletehistory False -debug True</div>
<div class="line">python main.py -domainname stripedtower -cpn 4 -deletehistory False -debug True </div>
<div class="line">python main.py -domainname treetraversal -cpn 4 -deletehistory False -debug True </div>
<div class="line">python main.py -domainname RGBBlocks -cpn 4 -deletehistory False -debug True </div>
<div class="line"> </div>
<div class="line">python main.py -domainname blocks_clear2 -cpn 1 -deletehistory False -debug True -planner FONDASP</div>
<div class="line">python main.py -domainname RGBBlocks2 -cpn 4 -deletehistory False -debug True -planner FONDASP</div>
</div><!-- fragment --><p >the out put files is under folder <code>autogenerated</code>.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
get the policy</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
by PRP</h2>
<div class="fragment"><div class="line">./RunPRPForCurDomain.sh llvisitall</div>
<div class="line">./PrintHuman_Policy.sh llvisitall</div>
<div class="line">python ./DrawDotPolicy.py -domainname llvisitall</div>
<div class="line"> </div>
<div class="line">./RunPRPForCurDomain.sh reversell</div>
<div class="line">./PrintHuman_Policy.sh reversell</div>
<div class="line">python ./DrawDotPolicy.py -domainname reversell</div>
<div class="line"> </div>
<div class="line">./RunPRPForCurDomain.sh blocks_clear</div>
<div class="line">./PrintHuman_Policy.sh blocks_clear</div>
<div class="line">python ./DrawDotPolicy.py -domainname blocks_clear</div>
<div class="line"> </div>
<div class="line">./RunPRPForCurDomain.sh stripedtower</div>
<div class="line">./PrintHuman_Policy.sh stripedtower</div>
<div class="line">python ./DrawDotPolicy.py -domainname stripedtower</div>
<div class="line"> </div>
<div class="line">./RunPRPForCurDomain.sh treetraversal</div>
<div class="line">./PrintHuman_Policy.sh treetraversal</div>
<div class="line">python ./DrawDotPolicy.py -domainname treetraversal</div>
<div class="line"> </div>
<div class="line">./RunPRPForCurDomain.sh RGBBlocks</div>
<div class="line">./PrintHuman_Policy.sh RGBBlocks</div>
<div class="line">python ./DrawDotPolicy.py -domainname RGBBlocks</div>
</div><!-- fragment --><p >out files is generated under folder <code>solutionsByPRP</code></p>
<h2><a class="anchor" id="autotoc_md4"></a>
by FOND-ASP</h2>
<p >copy <code>fond_RGBBlocks2_d.pddl</code> and <code>fond_RGBBlocks2_p.pddl</code> to folder <code>/mnt/d/FOND-ASP/domains/pddl/autogenerated/</code>, <code>cd /mnt/d/FOND-ASP</code>and run:</p>
<div class="fragment"><div class="line">$ python -m fcfond.main -stats -out output.RGBBlocks2 -planner fcfond/planner_clingo/fondplus_show_pretty.lp -pddl domains/pddl/autogenerated/fond_RGBBlocks2_d.pddl domains/pddl/autogenerated/fond_RGBBlocks2_p.pddl </div>
<div class="line">$ python -m fcfond.main -stats -out output.block_clear -planner fcfond/planner_clingo/fondplus_show_pretty.lp -pddl domains/pddl/autogenerated/fond_blocks_clear2_d.pddl domains/pddl/autogenerated/fond_blocks_clear2_p.pddl</div>
</div><!-- fragment --><p >output is the file <code>output.RGBBlocks2/stdout-asp.txt</code>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
